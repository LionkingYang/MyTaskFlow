# TaskFlow
## 简介
### TaskFlow是什么？
顾名思义，TaskFlow是一堆任务的集合，按照某种特定的依赖，组成类似流图的关系，很多大型的任务都可以分拆为各种小型任务组成的TaskFlow。

TaskFlow有两个重要的组成方式，数据流和控制流，数据流表示数据通过输入输出，在TaskFlow的各个任务之间流动；控制流则代表TaskFlow中各个任务的执行顺序。

TaskFlow的执行存在以下难点：
- 首先数据流的依赖关系需要谨慎梳理，否则容易出现数据循环依赖即流图出现成环的现象，这样的TaskFlow是无法完成的，而很多大型的任务，去判断是否存在这样的循环数据依赖非常困难。
- 在实现合理的数据依赖后，在设置控制流时，需要考虑到数据流中的各种依赖，否则，则会导致整个TaskFlow执行的崩溃。

本项目主要集中与以上两个问题，希望提供一个简单易用并且高性能的TaskFlow执行框架

### 本框架支持什么？
针对以上两个问题，本项目提供了以下的解决方案：
- 提供了循环依赖检查工具，方便使用者确认自己的任务流中是否存在循环引用的情况。同时，框架执行时会进行图的校验，如果存在循环引用，会报错提醒框架使用者。
- 使用拓扑排序的思想规划任务的执行路径，同时利用高性能的线程池工具，提高TaskFlow执行的并行度，减小线程切换带来的损失。

同时，本框架还提供这些功能：
- 简单的算子编写体验
- 根据图配置，一键生成算子和项目代码
- 算子和图配置的相互校验
- 算子和图的热更新
- 算子配置注入
- 基于spdlog的多级日志支持
- 简单易用的对象池
- 简单易用的LatencyDebug工具
- 简单易用的json解析接口
- ... ...

## 入门(TODO)
### 图配置文件
### 算子编写
### 执行
## 一键生成项目
cd tools

python3 generate_project.py project_path(**你的项目目录**) json_file_path(**你的图配置，graph.json**)

可以在项目根目录下生成算子目录ops，并且增加与配置流程图对应的算子模版project_op.cpp，同时在项目根目录生成主文件project_main.cpp